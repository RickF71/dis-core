id: schema.mutation.v1
title: "DIS Schema Mutation Protocol"
version: v1
scope: core
origin: dis-core.bootstrap

description: >
  Defines how DIS schemas are amended within the ledger environment.
  Replaces manual YAML edits with reflexive consent-controlled updates.

fields:
  proposal:
    proposer: id-lima
    target_schema: schema.id
    proposed_hash: sha256
    diff_summary: string
    justification: string
    timestamp: datetime
  consent_cycle:
    start: datetime
    end: datetime
    participants: [id-lima]
    quorum: float
    approvals: int
    rejections: int
  resolution:
    outcome: [accepted, rejected, deferred]
    new_hash: sha256
    supersedes: schema.id
    recorded_in: ledger.collection.schemas
    receipt_id: id-rcpt
  rollback:
    break_glass_code: id-lima
    conditions: >
      Can be triggered only if outcome=accepted and corruption detected
      within audit window or by domain.freeze.override.v1 event.

rules:
  - A schema may mutate only through accepted proposals meeting quorum >= 0.67.
  - Each mutation emits a reflexive receipt signed by all consenting Limans.
  - Frozen schemas (frozen:true) require explicit override receipt to mutate.
  - All schema mutations must preserve prior hash lineage for audit integrity.

ledger_ref:
  collection: dis.schemas.mutations
  entry_type: reflexive_receipt

moral_basis: >
  Authority to alter structure flows from collective Lima consent,
  never from single administrative control.
